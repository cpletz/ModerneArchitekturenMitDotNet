"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <require from="nav-bar.html"></require>\n  <require from="bootstrap/css/bootstrap.css"></require>\n\n  <nav-bar router.bind="router" busy.bind="busyState"></nav-bar>\n\n  <div class="page-host disabled">\n    <!--<loading-indicator loading.bind="router.isNavigating || busy.isBusy"></loading-indicator>-->\n    <router-view></router-view>\n  </div>\n\n</template>\n'})}(),System.register("app.js",["aurelia-router","aurelia-event-aggregator","aurelia-framework","./current-player","./busy-state"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.Redirect},function(a){e=a.EventAggregator},function(a){f=a.inject},function(a){g=a.CurrentPlayer},function(a){h=a.BusyState}],execute:function(){a("App",(i=f(e,g,h),k=i(j=function(){function a(b,d,e){var f=this;c(this,a),b.subscribe("player/loggedin",function(a){f.playerLoggedIn(a)}),this.eventAggregator=b,this.currentPlayer=d,this.busyState=e}return a.prototype.configureRouter=function(a,b){a.title="TicTacTech",a.map([{route:"player",name:"player",moduleId:"player/router",nav:!0,title:"Player"},{route:"game",name:"game",moduleId:"game/game",nav:!0,title:"Game"},{route:"stats",name:"stats",moduleId:"stats/router",nav:!0,title:"Statistics"},{route:"",redirect:"player"}]),b.playerId="?",this.router=b},a.prototype.playerLoggedIn=function(a){this.router.playerId=a.id,this.router.navigate("game")},a}())||j)),a("App",k)}}}),System.register("blur-image.js",["aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,f,g){if(!(isNaN(g)||g<1)){g|=0;var h,i=a.getContext("2d");try{h=i.getImageData(b,c,d,f)}catch(j){throw new Error("unable to access image data: "+j)}var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=h.data,L=g+g+1,M=d-1,N=f-1,O=g+1,P=O*(O+1)/2,Q=new e,R=Q;for(o=1;o<L;o++)if(R=R.next=new e,o==O)var S=R;R.next=Q;var T=null,U=null;s=r=0;var V=k[g],W=l[g];for(n=0;n<f;n++){for(B=C=D=E=t=u=v=w=0,x=O*(F=K[r]),y=O*(G=K[r+1]),z=O*(H=K[r+2]),A=O*(I=K[r+3]),t+=P*F,u+=P*G,v+=P*H,w+=P*I,R=Q,o=0;o<O;o++)R.r=F,R.g=G,R.b=H,R.a=I,R=R.next;for(o=1;o<O;o++)p=r+((M<o?M:o)<<2),t+=(R.r=F=K[p])*(J=O-o),u+=(R.g=G=K[p+1])*J,v+=(R.b=H=K[p+2])*J,w+=(R.a=I=K[p+3])*J,B+=F,C+=G,D+=H,E+=I,R=R.next;for(T=Q,U=S,m=0;m<d;m++)K[r+3]=I=w*V>>W,0!=I?(I=255/I,K[r]=(t*V>>W)*I,K[r+1]=(u*V>>W)*I,K[r+2]=(v*V>>W)*I):K[r]=K[r+1]=K[r+2]=0,t-=x,u-=y,v-=z,w-=A,x-=T.r,y-=T.g,z-=T.b,A-=T.a,p=s+((p=m+g+1)<M?p:M)<<2,B+=T.r=K[p],C+=T.g=K[p+1],D+=T.b=K[p+2],E+=T.a=K[p+3],t+=B,u+=C,v+=D,w+=E,T=T.next,x+=F=U.r,y+=G=U.g,z+=H=U.b,A+=I=U.a,B-=F,C-=G,D-=H,E-=I,U=U.next,r+=4;s+=d}for(m=0;m<d;m++){for(C=D=E=B=u=v=w=t=0,r=m<<2,x=O*(F=K[r]),y=O*(G=K[r+1]),z=O*(H=K[r+2]),A=O*(I=K[r+3]),t+=P*F,u+=P*G,v+=P*H,w+=P*I,R=Q,o=0;o<O;o++)R.r=F,R.g=G,R.b=H,R.a=I,R=R.next;for(q=d,o=1;o<=g;o++)r=q+m<<2,t+=(R.r=F=K[r])*(J=O-o),u+=(R.g=G=K[r+1])*J,v+=(R.b=H=K[r+2])*J,w+=(R.a=I=K[r+3])*J,B+=F,C+=G,D+=H,E+=I,R=R.next,o<N&&(q+=d);for(r=m,T=Q,U=S,n=0;n<f;n++)p=r<<2,K[p+3]=I=w*V>>W,I>0?(I=255/I,K[p]=(t*V>>W)*I,K[p+1]=(u*V>>W)*I,K[p+2]=(v*V>>W)*I):K[p]=K[p+1]=K[p+2]=0,t-=x,u-=y,v-=z,w-=A,x-=T.r,y-=T.g,z-=T.b,A-=T.a,p=m+((p=n+O)<N?p:N)*d<<2,t+=B+=T.r=K[p],u+=C+=T.g=K[p+1],v+=D+=T.b=K[p+2],w+=E+=T.a=K[p+3],T=T.next,x+=F=U.r,y+=G=U.g,z+=H=U.b,A+=I=U.a,B-=F,C-=G,D-=H,E-=I,U=U.next,r+=d}i.putImageData(h,b,c)}}function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function f(a,b){var c=a.width,e=a.height,f=a.getContext("2d");f.drawImage(b,0,0,c,e),d(a,0,0,c,e,m)}var g,h,i,j,k,l,m;return{setters:[function(a){g=a.inject}],execute:function(){a("BlurImageCustomAttribute",(h=g(Element),j=h(i=function(){function a(b){c(this,a),this.element=b}return a.prototype.valueChanged=function(a){var b=this;a.complete?f(this.element,a):a.onload=function(){return f(b.element,a)}},a}())||i)),a("BlurImageCustomAttribute",j),k=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],m=40}}}),System.register("bootstrap-validation/bootstrap-form-validation-renderer.js",["aurelia-dependency-injection","aurelia-validation"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.validationRenderer}],execute:function(){a("BootstrapFormValidationRenderer",(f=d(Element),h=e(g=f(g=function(){function a(b){c(this,a),this.boundaryElement=b}return a.prototype.render=function(a,b){if(b&&(this.boundaryElement===b||this.boundaryElement.contains(b))){b.errors=b.errors||new Map,b.errors.set(a);var c=b.querySelector(".form-group")||b.closest(".form-group");c.classList.add("has-error");var d=document.createElement("span");d.classList.add("help-block"),d.classList.add("validation-error"),d.textContent=a.message,d.error=a,c.appendChild(d)}},a.prototype.unrender=function(a,b){if(b&&b.errors&&b.errors.has(a)){b.errors["delete"](a);var c=b.querySelector(".form-group")||b.closest(".form-group");c.classList.remove("has-error");for(var d=c.querySelectorAll(".validation-error"),e=d.length;e--;){var f=d[e];f.error===a&&(f.error=null,f.remove())}}},a}())||g)||g)),a("BootstrapFormValidationRenderer",h),function(a){a.matches=a.matches||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector,a.closest=a.closest||function(a){for(var b=this;b&&!b.matches(a);)b=b.parentElement;return b}}(Element.prototype)}}}),System.register("bootstrap-validation/index.js",["./bootstrap-form-validation-renderer"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.BootstrapFormValidationRenderer}],execute:function(){function b(a){a.container.registerHandler("bootstrap-form",function(a){return a.get(c)})}a("configure",b)}}}),function(){var a=System.amdDefine;a("game/game.css!github:systemjs/plugin-text@0.0.8.js",[],function(){return'.square {\r\n    width: 100%;\r\n    /*padding-bottom: 100%;*/\r\n    overflow:hidden;\r\n}\r\n\r\n.gutter-10.row {\r\n  margin-right: -5px;\r\n  margin-left: -5px;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n}\r\n.gutter-10 > [class^="col-"], .gutter-10 > [class^=" col-"] {\r\n  padding-right: 5px;\r\n  padding-left: 5px;\r\n}\r\n'})}(),function(){var a=System.amdDefine;a("game/game.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\r\n  <require from="game/game.css"></require>\r\n  <section class="au-animate">\r\n    <h3>Let\'s play ...</h3>\r\n    <form class="form-horizontal" role="form" submit.trigger="submit()">\r\n\r\n      <!--<div class="form-group">\r\n        <div class="col-sm-offset-1 col-xs-offset-2 col-xs-10 col-sm-10">\r\n          <button type="submit" class="btn btn-primary">I want to play</button>\r\n        </div>\r\n      </div>-->\r\n\r\n      <div class="form-group">\r\n        <label for="id" class="col-xs-2 col-sm-1 control-label">You</label>\r\n        <div class="col-xs-4 col-sm-2">\r\n          <input type="text" value.bind="playerId" class="form-control" id="id" placeholder="identifier">\r\n        </div>\r\n        <div class="col-xs-1">\r\n          <i class="fa fa-${myRoleIcon} fa-2x"></i>\r\n        </div>\r\n        <div class="col-xs-2 col-sm-2">\r\n          <button type="submit" class="btn btn-primary">Play</button>\r\n        </div>\r\n      </div>\r\n      <div class="form-group">\r\n        <label for="other" class="col-xs-2 col-sm-1 control-label">Other</label>\r\n        <div class="col-xs-4 col-sm-2">\r\n          <input type="text" value.bind="otherPlayer" class="form-control" readonly="readonly" id="other">\r\n        </div>\r\n        <div class="col-xs-1">\r\n          <i class="fa fa-${otherRoleIcon} fa-2x"></i>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </section>\r\n  <section>\r\n    <h3>${message}</h3>\r\n  </section>\r\n  <section>\r\n    <!--<div class="container">-->\r\n    <div class="row gutter-10">\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[0])}" click.trigger="cellClicked(0)"><i class="${getCellImageClass(cells[0])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[1])}" click.trigger="cellClicked(1)"><i class="${getCellImageClass(cells[1])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[2])}" click.trigger="cellClicked(2)"><i class="${getCellImageClass(cells[2])}"></i></button></div>\r\n    </div>\r\n    <div class="row gutter-10">\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[3])}" click.trigger="cellClicked(3)"><i class="${getCellImageClass(cells[3])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[4])}" click.trigger="cellClicked(4)"><i class="${getCellImageClass(cells[4])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[5])}" click.trigger="cellClicked(5)"><i class="${getCellImageClass(cells[5])}"></i></button></div>\r\n    </div>\r\n    <div class="row gutter-10">\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[6])}" click.trigger="cellClicked(6)"><i class="${getCellImageClass(cells[6])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[7])}" click.trigger="cellClicked(7)"><i class="${getCellImageClass(cells[7])}"></i></button></div>\r\n      <div class="col-xs-4 col-sm-2"><button class="${getCellButtonClass(cells[8])}" click.trigger="cellClicked(8)"><i class="${getCellImageClass(cells[8])}"></i></button></div>\r\n    </div>\r\n    <!--</div>-->\r\n\r\n  </section>\r\n\r\n</template>'})}(),System.register("current-player.js",["aurelia-event-aggregator","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.EventAggregator},function(a){e=a.inject}],execute:function(){a("CurrentPlayer",(f=e(d),h=f(g=function(){function a(b){var d=this;c(this,a),this.playerId="?",b.subscribe("player/loggedin",function(a){d.playerLoggedIn(a)})}return a.prototype.playerLoggedIn=function(a){this.playerId=a.id,this.player=a},a}())||g)),a("CurrentPlayer",h)}}}),System.register("game/game.js",["aurelia-http-client","jquery","ms-signalr-client","aurelia-framework","./../current-player"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){e=a.HttpClient},function(a){f=a["default"]},function(a){},function(a){g=a.LogManager,h=a.computedFrom,i=a.inject},function(a){j=a.CurrentPlayer}],execute:function(){k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=g.getLogger("game"),r="http://tictactech.westeurope.cloudapp.azure.com:8222/",a("Game",(l=i(j),m=h("role"),n=h("role"),s=l((p=function(){function a(b){c(this,a),this.currentPlayer=b,this.heading="Let's play!",this.playerId=b.playerId,this.connectionId="",this.gameHub={},this.cells=[],this.resetCells(),this.otherPlayer="",this.role="",this.status="NoGame",this.message="",this.setMessage()}return a.prototype.submit=function(){q.info("submit called for: "+this.playerId),this.playerId&&(this.gameHub.invoke("LetMePlay",this.playerId,this.connectionId),this.resetCells(),this.status="WaitingForOther",this.setMessage())},a.prototype.cellClicked=function(a){"MoveRequired"===this.status&&"E"===this.cells[a]&&(this.cells[a]=this.role,this.cells=this.cells.join("").split(""),this.gameHub.invoke("SelectCell",this.playerId,this.connectionId,a),this.status="WaitAndSee")},a.prototype.activate=function(){var a=this,b=f.hubConnection(r),c=b.createHubProxy("GameHub");c.logging=!0,c.on("gameStarted",function(b,c){a.gameStarted(b,c)}),c.on("gameStateChanged",function(b,c){a.gameStateChanged(b,c)}),b.reconnecting(function(a){q.info("reconnecting")}),b.reconnected(function(a){q.info("reconnected")}),b.disconnected(function(a){q.info("disconnected")}),b.error(function(a){q.error("SignalR error: "+a)}),b.start().done(function(b){a.connectionId=b.id,a.gameHub=c})},a.prototype.resetCells=function(){this.cells="EEEEEEEEE".split("")},a.prototype.getMessage=function(){switch(this.status){case"WaitingForOther":return"Waiting for other player ...";case"GameStarted":return"Game has been started";case"WaitAndSee":return"Its the other's turn";case"MoveRequired":return"Its your turn!";case"YouWon":return"Congratulations! You won!";case"YouLost":return"Oh, oh ... you lost";case"Tie":return"No winner ... its a tie";default:return"No game started"}},a.prototype.setMessage=function(){this.message=this.getMessage()},a.prototype.gameStarted=function(a,b){this.otherPlayer=a,this.role=b,this.status="GameStarted",this.setMessage()},a.prototype.gameStateChanged=function(a,b){this.cells=a.split(""),this.status=b,this.setMessage()},a.prototype.getCellClass=function(a){return"X"===a?"x":"O"===a?"o":""},a.prototype.getCellButtonClass=function(a){return"X"===a?"btn btn-warning square disabled":"O"===a?"btn btn-info square disabled":"MoveRequired"===this.status?"btn btn-default square":"btn btn-default square disabled"},a.prototype.getCellImageClass=function(a){return"X"===a?"fa fa-remove fa-5x":"O"===a?"fa fa-circle-o fa-5x":"WaitAndSee"===a?"fa fa-spinner fa-splin":"fa fa-square-o fa-5x"},k(a,[{key:"myRoleIcon",get:function(){switch(this.role){case"X":return"remove";case"O":return"circle-o";default:return"question-circle-o"}}},{key:"otherRoleIcon",get:function(){switch(this.role){case"X":return"circle-o";case"O":return"remove";default:return"question-circle-o"}}}]),a}(),d(p.prototype,"myRoleIcon",[m],Object.getOwnPropertyDescriptor(p.prototype,"myRoleIcon"),p.prototype),d(p.prototype,"otherRoleIcon",[n],Object.getOwnPropertyDescriptor(p.prototype,"otherRoleIcon"),p.prototype),o=p))||o)),a("Game",s)}}}),System.register("main.js",["bootstrap"],function(a,b){"use strict";return{setters:[function(a){}],execute:function(){function b(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-validation").plugin("aurelia-validatejs").feature("bootstrap-validation"),a.start().then(function(){return a.setRoot()})}a("configure",b)}}}),function(){var a=System.amdDefine;a("nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="router, busy">\n  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse">\n        <span class="sr-only">Toggle Navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand" href="#">\n        <!--<i class="fa fa-home"></i>-->\n        <i class="${router.isNavigating || busy.isBusy ? \'fa fa-spinner fa-spin\' : \'fa fa-home\'}"></i>\n        <span>${router.title}</span>\n      </a>\n    </div>\n\n    <div class="collapse navbar-collapse" id="skeleton-navigation-navbar-collapse">\n      <ul class="nav navbar-nav">\n        <li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}">\n          <a data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse.in" href.bind="row.href">${row.title}</a>\n        </li>\n      </ul>\n\n      <ul class="nav navbar-nav navbar-right">\n        <li><p class="navbar-text">Signed in as ${router.playerId}</p></li>\n        <li class="loader" if.bind="router.isNavigating || busy.isBusy">\n          <i class="fa fa-spinner fa-spin fa-2x"></i>\n        </li>\n      </ul>\n    </div>\n  </nav>\n</template>\n'})}(),function(){var a=System.amdDefine;a("player/login.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <require from="./validation-summary.html"></require>\n  <section class="au-animate">\n    <h2>${heading}</h2>\n    <loading-indicator loading.bind="isRequesting"></loading-indicator>\n    <form role="form" submit.delegate="submit()" validation-renderer="bootstrap-form" validation-errors.bind="errors">\n      <validation-summary errors.bind="errors" autofocus.bind="controller.validateTrigger === \'manual\'">\n      </validation-summary>\n      <div class="alert alert-danger ${serverError == \'\' ? \'hidden\' : \'\'}" role="alert">\n        ${serverError}\n      </div>\n      <div class="form-group">\n        <label for="id">Player Id</label>\n        <input type="text" value.bind="playerId & validate" class="form-control" id="id" placeholder="Player Id">\n      </div>\n      <button type="submit" class="btn btn-default">Submit</button>\n    </form>\n  </section>\n</template>'})}(),System.register("busy-state.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("BusyState",d=function(){function a(){c(this,a),this._busyCount=0,this.isBusy=!1}return a.prototype.increment=function(){this._busyCount+=1,this.isBusy=!0},a.prototype.decrement=function(){this._busyCount-=1,0===this._busyCount&&(this.isBusy=!1)},a}()),a("BusyState",d)}}}),System.register("player/login.js",["aurelia-framework","./service-api","aurelia-validation","aurelia-validatejs","aurelia-event-aggregator","./../busy-state"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n,o,p;return{setters:[function(a){d=a.inject,e=a.NewInstance},function(a){f=a.ServiceApi},function(a){g=a.ValidationController,h=a.validateTrigger},function(a){i=a.required,j=a.email,k=a.ValidationRules},function(a){l=a.EventAggregator},function(a){m=a.BusyState}],execute:function(){a("Login",(n=d(f,e.of(g),l,m),p=n(o=function(){function a(b,d,e,f){c(this,a),this.heading="Enter your player Id",this.playerId="",this.serviceApi=b,this.valctrl=d,this.eventAggregator=e,this.serverError="",this.isRequesting=!0,this.busyState=f}return a.prototype.submit=function(){var a=this;this.serverError="",this.valctrl.validate(),0===this.errors.length&&(this.isRequesting=!0,this.busyState.increment(),this.serviceApi.getPlayer(this.playerId).then(function(b){"null"===b.response?a.serverError="Player not found.":(a.serverError="",a.eventAggregator.publish("player/loggedin",JSON.parse(b.response))),a.isRequesting=!1,a.busyState.decrement()},function(b){a.serverError="Request could not be processed.",a.isRequesting=!1,a.busyState.decrement()}))},a}())||o)),a("Login",p),k.ensure("playerId").required().on(p)}}}),function(){var a=System.amdDefine;a("player/register.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <require from="./validation-summary.html"></require>\n  <section class="au-animate">\n    <h2>${heading}</h2>\n    <form role="form" submit.delegate="submit()" validation-renderer="bootstrap-form" validation-errors.bind="errors">\n      <validation-summary errors.bind="errors" autofocus.bind="controller.validateTrigger === \'manual\'">\n      </validation-summary>\n      <div class="alert alert-danger ${serverError == \'\' ? \'hidden\' : \'\'}" role="alert">\n        ${serverError}\n      </div>\n      <div class="form-group">\n        <label for="id">Player  Id</label>\n        <input type="text" value.bind="playerId & validate" class="form-control" id="id" placeholder="Player Id">\n      </div>\n      <div class="form-group">\n        <label for="fn">First Name</label>\n        <input type="text" value.bind="firstName & validate" class="form-control" id="fn" placeholder="first name">\n      </div>\n      <div class="form-group">\n        <label for="ln">Last Name</label>\n        <input type="text" value.bind="lastName & validate" class="form-control" id="ln" placeholder="last name">\n      </div>      \n      <div class="form-group">\n        <label for="em">E-Mail</label>\n        <input type="text" value.bind="email & validate" class="form-control" id="em" placeholder="e-mail">\n      </div>\n      <button type="submit" class="btn btn-default">Submit</button>\n    </form>\n  </section>\n</template>'})}(),System.register("player/service-url.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[],execute:function(){d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ServiceUrl",e=function(){function a(){c(this,a)}return d(a,null,[{key:"Url",get:function(){return"http://tictactechplayer.azurewebsites.net/api/player/"}}]),a}()),a("ServiceUrl",e)}}}),System.register("player/service-api.js",["aurelia-framework","aurelia-http-client","./service-url"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.ServiceUrl}],execute:function(){a("ServiceApi",(g=d(e),i=g(h=function(){function a(b){c(this,a),b.configure(function(a){a.withBaseUrl(f.Url)}),this.http=b}return a.prototype.getPlayer=function(a){var b=this.http.createRequest(a).asGet();return b.send()},a.prototype.createPlayer=function(a,b,c,d){var e={id:a,firstName:b,lastName:c,email:d},f=this.http.createRequest("").asPost().withContent(e);return f.send()},a}())||h)),a("ServiceApi",i)}}}),System.register("player/register.js",["aurelia-framework","./service-api","aurelia-validation","aurelia-validatejs","aurelia-event-aggregator"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){d=a.inject,e=a.NewInstance},function(a){f=a.ServiceApi},function(a){g=a.ValidationController,h=a.validateTrigger},function(a){i=a.required,j=a.email,k=a.ValidationRules},function(a){l=a.EventAggregator}],execute:function(){a("Register",(m=d(f,e.of(g),l),o=m(n=function(){function a(b,d,e){c(this,a),this.playerId="",this.firstName="",this.lastName="",this.email="",this.heading="Enter your details",this.serviceApi=b,this.valctrl=d,this.eventAggregator=e,this.serverError=""}return a.prototype.submit=function(){var a=this;this.serverError="",this.valctrl.validate(),0===this.errors.length&&this.serviceApi.createPlayer(this.playerId,this.firstName,this.lastName,this.email).then(function(b){"null"===b.response?a.serverError="Player with given Id already exists.":(a.serverError="",a.eventAggregator.publish("player/loggedin",JSON.parse(b.response)))},function(b){a.serverError="Request could not be processed."})},a}())||n)),a("Register",o),k.ensure("playerId").required().ensure("firstName").required().ensure("lastName").required().ensure("email").required().email().on(o)}}}),function(){var a=System.amdDefine;a("player/router.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <section class="au-animate">\n    <h2>${heading}</h2>\n    <div>\n      <div class="col-md-2">\n        <ul class="well nav nav-pills nav-stacked">\n          <li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}">\n            <a href.bind="row.href">${row.title}</a>\n          </li>\n        </ul>\n      </div>\n      <div class="col-md-10" style="padding: 0">\n        <router-view></router-view>\n      </div>\n    </div>\n  </section>\n</template>\n'})}(),System.register("player/router.js",["aurelia-router"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.Redirect}],execute:function(){a("Router",e=function(){function a(){c(this,a),this.heading="Login or register"}return a.prototype.configureRouter=function(a,b){a.map([{route:"login",name:"login",moduleId:"player/login",nav:!0,title:"Login"},{route:"register",name:"register",moduleId:"player/register",nav:!0,title:"Register"},{route:"",redirect:"login"}]),this.router=b},a}()),a("Router",e)}}}),function(){var a=System.amdDefine;a("player/validation-summary.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="errors, autofocus">\r\n  <div class="alert alert-danger" tabindex="-1"       \r\n       show.bind="errors.length"\r\n       focus.one-way="autofocus && errors.length > 0">\r\n    <ul class="list-unstyled">\r\n      <li repeat.for="errorInfo of errors">\r\n        <a class="text-danger" href="#" click.delegate="errorInfo.target.focus()">\r\n          ${errorInfo.error.message}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>'})}(),function(){var a=System.amdDefine;a("stats/highscore.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\r\n    <section class="au-animate">\r\n        <h2>${heading}</h2>\r\n        <table class="table table-striped">\r\n            <th>Player ID</th>\r\n            <th>Name</th>\r\n            <th>Points</th>\r\n            <tr repeat.for="player of players">\r\n                <td>${player.playerId}</td>\r\n                <td>${player.name}</td>\r\n                <td>${player.points}</td>\r\n            </tr>\r\n        </table>\r\n    </section>\r\n</template>'})}(),System.register("stats/service-api.js",["aurelia-framework","aurelia-http-client","./service-url"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.HttpClient},function(a){f=a.ServiceUrl}],execute:function(){a("ServiceApi",(g=d(e),i=g(h=function(){function a(b){c(this,a),b.configure(function(a){a.withBaseUrl(f.Url+"api/Highscore/")}),this.http=b}return a.prototype.retrieveHighscore=function(){var a=this.http.createRequest().asGet();return a.send()},a}())||h)),a("ServiceApi",i)}}}),System.register("stats/highscore.js",["aurelia-framework","./service-api"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.ServiceApi}],execute:function(){a("Highscore",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.heading="Highscore",this.serviceApi=b,this.players=[]}return a.prototype.activate=function(){this.retrieveHighscore()},a.prototype.retrieveHighscore=function(){var a=this;this.serviceApi.retrieveHighscore().then(function(b){return a.players=JSON.parse(b.response)})},a}())||g)),a("Highscore",h)}}}),function(){var a=System.amdDefine;a("stats/live.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\r\n    <section class="au-animate">\r\n        <h2>${heading}</h2>\r\n\r\n        <table class="table table-striped">\r\n            <th>Started</th>\r\n            <th>Player X</th>\r\n            <th>Player O</th>\r\n            <th>Status</th>\r\n            <th>Board</th>\r\n\r\n            <tr repeat.for="game of games">\r\n                <td>${game.startTime}</td>\r\n                <td>${game.playerX}</td>\r\n                <td>${game.playerO}</td>\r\n                <td>${game.status}</td>\r\n                <td>\r\n                    <table class="table table-bordered table-condensed">\r\n                        <tbody>\r\n                            <tr>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 0 ? \'warning\' : \'\'}">${game.board[0]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 1 ? \'warning\' : \'\'}">${game.board[1]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 2 ? \'warning\' : \'\'}">${game.board[2]}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 3 ? \'warning\' : \'\'}">${game.board[3]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 4 ? \'warning\' : \'\'}">${game.board[4]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 5 ? \'warning\' : \'\'}">${game.board[5]}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 6 ? \'warning\' : \'\'}">${game.board[6]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 7 ? \'warning\' : \'\'}">${game.board[7]}</td>\r\n                                <td height="31px" width="31px" class="col-xs-4 text-center ${game.pos === 8 ? \'warning\' : \'\'}">${game.board[8]}</td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </td>\r\n            </tr>\r\n\r\n        </table>\r\n\r\n    </section>\r\n</template>'})}(),System.register("stats/service-url.js",[],function(a,b){"use strict";function c(a,b){
if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[],execute:function(){d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("ServiceUrl",e=function(){function a(){c(this,a)}return d(a,null,[{key:"Url",get:function(){return"http://tictactechstats.azurewebsites.net/"}}]),a}()),a("ServiceUrl",e)}}}),System.register("stats/live.js",["aurelia-framework","jquery","ms-signalr-client","./service-url"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.LogManager},function(a){e=a["default"]},function(a){},function(a){f=a.ServiceUrl}],execute:function(){g=d.getLogger("live-games"),a("Live",h=function(){function a(){c(this,a),this.heading="Live games",this._games=new Map,this.games=[]}return a.prototype.makeBoardArray=function(a){return Array.from(a.split("").map(function(a){return"E"===a?" ":a}))},a.prototype.getGameInfo=function(a){var b=this._games.get(a);return b||(b={startTime:"",endTime:"",playerX:"",playerO:"",status:"started",board:this.makeBoardArray("EEEEEEEEE"),pos:-1,finished:!1}),b},a.prototype.updateGames=function(a,b){this._games.set(a,b),this.games=Array.from(this._games.values()).sort(function(a,b){return a.startTime>b.startTime?-1:1})},a.prototype.gameStarted=function(a){g.info("game started");var b=JSON.parse(a),c=this.getGameInfo(b.gameId);c.startTime=new Date(b.startTime).toLocaleTimeString(),c.playerX=b.playerX,c.playerO=b.playerO,c.status="started",this.updateGames(b.gameId,c)},a.prototype.gameFinished=function(a){g.info("game finished");var b=JSON.parse(a),c=this.getGameInfo(b.gameId);c.finished=!0,c.status=b.result,c.endTime=b.endTime,c.board=this.makeBoardArray(b.board),c.pos=-1,this.updateGames(b.gameId,c)},a.prototype.gameMove=function(a){g.info("game move");var b=JSON.parse(a),c=this.getGameInfo(b.gameId);c.finished||(c.status="Move by "+b.moveBy,c.board=this.makeBoardArray(b.board),c.pos=b.position,this.updateGames(b.gameId,c))},a.prototype.activate=function(){var a=this,b=e.hubConnection(f.Url),c=b.createHubProxy("LiveGamesHub");c.logging=!0,c.on("gameStarted",function(b){a.gameStarted(b)}),c.on("gameFinished",function(b){a.gameFinished(b)}),c.on("gameMove",function(b){a.gameMove(b)}),b.reconnecting(function(a){g.info("reconnecting")}),b.reconnected(function(a){g.info("reconnected")}),b.disconnected(function(a){g.info("disconnected")}),b.error(function(a){g.error("SignalR error: "+a)}),b.start()},a}()),a("Live",h)}}}),function(){var a=System.amdDefine;a("stats/router.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <section class="au-animate">\n    <h2>${heading}</h2>\n    <div>\n      <div class="col-md-2">\n        <ul class="well nav nav-pills nav-stacked">\n          <li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}">\n            <a href.bind="row.href">${row.title}</a>\n          </li>\n        </ul>\n      </div>\n      <div class="col-md-10" style="padding: 0">\n        <router-view></router-view>\n      </div>\n    </div>\n  </section>\n</template>\n'})}(),System.register("stats/router.js",["aurelia-router"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.Redirect}],execute:function(){a("Router",e=function(){function a(){c(this,a),this.heading="Statistics"}return a.prototype.configureRouter=function(a,b){a.map([{route:"highscore",name:"highscore",moduleId:"stats/highscore",nav:!0,title:"Highscore"},{route:"live",name:"live",moduleId:"stats/live",nav:!0,title:"Live games"},{route:"",redirect:"live"}]),this.router=b},a}()),a("Router",e)}}});